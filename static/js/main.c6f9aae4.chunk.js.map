{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","logo","alt","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","name","link","onClick","onCardClick","aria-label","type","onCardLike","length","onConfirmClick","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","item","Footer","ImagePopup","card","isOpen","role","onClose","PopupWithForm","title","method","onSubmit","children","isLoading","loadingButtonTitle","buttonName","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","id","value","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","setTimeout","ref","AddPlacePopup","setLink","ConfirmPopup","onConfirm","api","url","headers","this","_url","_headers","fetch","then","result","_getResponseData","body","JSON","stringify","cardId","ok","json","Promise","reject","Error","status","authorization","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImagePopupOpen","setImagePopup","isConfirmPopupOpen","setConfirmPopup","setLoading","selectedCard","setSelectedCard","setCards","setCurrentUser","closeAllPopups","resolve","getUserInfo","data","getCards","catch","error","console","log","useEventListener","key","Provider","changeLikeCardStatus","newCard","newCards","c","addCard","setUserAvatar","setUserInfo","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c6f9aae4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction  Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"logo\" alt=\"Логотип Mesto\"/>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  const isOwn = props.owner._id === currentUser._id;\r\n\r\n  const isLiked = props.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = (\r\n    `button button_type_like opacity ${isLiked ? 'button_type_like_active' : ''}`\r\n  );\r\n\r\n  const cardDeleteButtonClassName = (\r\n    `button button_type_delete-card ${isOwn ? 'button_type_delete-card-visible' : 'button_type_delete-card-hidden'}`\r\n  );\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props);\r\n  }\r\n\r\n  function handleDeleteClick(){\r\n    //console.log(props);\r\n    props.onConfirmClick(props);\r\n  }\r\n\r\n  return (\r\n    <li className=\"card\"> \r\n      <img className=\"card__image\" alt={`Изображение ${props.name}`} src={props.link} onClick={handleClick}/>\r\n      <div className=\"card__content\">\r\n        <h2 className=\"card__title\">{props.name}</h2>\r\n        <div className=\"card__like-block\">\r\n          <button className={cardLikeButtonClassName}  aria-label=\"Нравиться\" type=\"button\" onClick={handleLikeClick}></button>\r\n          <p className=\"card__like-count\">{props.likes.length}</p>\r\n        </div>\r\n      </div>\r\n      <button className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from \"./Card\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-block\">\r\n          <img src={currentUser.avatar} className=\"profile__avatar\" alt=\"Аватар\"/>\r\n          <button \r\n            className=\"button button_type_edite-avatar opacity\" \r\n            aria-label=\"Редактировать\" \r\n            type=\"button\" \r\n            onClick={props.onEditAvatar}></button>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__full-name-wraper\">\r\n            <h1 className=\"profile__full-name\">{currentUser.name}</h1>\r\n            <button \r\n              className=\"button button_type_edite-profile opacity\" \r\n              aria-label=\"Редактировать\" \r\n              type=\"button\" \r\n              onClick={props.onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__occupation\">{currentUser.about}</p>\r\n        </div>\r\n        <button \r\n          className=\"button button_type_add-card opacity\" \r\n          aria-label=\"Добавить карточку\" \r\n          type=\"button\" \r\n          onClick={props.onAddPlace}></button>\r\n      </section>\r\n      <section className=\"cards\">\r\n        <ul className=\"cards__block\">\r\n          {props.cards.map(item => <Card \r\n            key = {item._id} \r\n            onConfirmClick={props.onConfirmClick} \r\n            onCardLike={props.onCardLike} \r\n            onCardClick={props.onCardClick} \r\n            {...item}/>)}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","function ImagePopup(props) {\r\n  const card = props.card;\r\n  \r\n  \r\n  return (\r\n    <div className={`popup popup_image ${props.isOpen ? 'popup_opened' : ''}`}  role=\"dialog\">\r\n      <div className=\"popup__image-container\">\r\n        <button className=\"button button_type_close opacity\" aria-label=\"Закрыть\" type=\"button\" onClick={props.onClose}></button>\r\n        <img className=\"popup__image\" alt={`Изображение ${card.name}`} src={card.link}/>\r\n        <h2 className=\"popup__image-title\">{card.name}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default ImagePopup;","function PopupWithForm(props) {\r\n  return (\r\n    <div className={`popup popup__${props.name} ${props.isOpen && 'popup_opened'}`} role=\"dialog\" >\r\n      <div className=\"popup__container\">\r\n      <button className=\"button button_type_close opacity\" aria-label=\"Закрыть\" type=\"button\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className=\"popup__form popup__form_add-new-card\" method=\"POST\" name={props.name} onSubmit={props.onSubmit}>\r\n          {props.children}\r\n          <button type=\"submit\"  className=\"button popup__button button_type_submit opacity\">{props.isLoading ? props.loadingButtonTitle : props.buttonName}</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeAbout(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    \r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      title=\"Редактировать профиль\" \r\n      buttonName=\"Сохранить\" \r\n      name=\"profile\" \r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      isLoading={props.isLoading}\r\n      onSubmit={handleSubmit}\r\n      loadingButtonTitle = 'Сохранение...'>\r\n      <input \r\n        type=\"text\" \r\n        className=\"popup__input popup__input_full-name\" \r\n        name=\"name\" \r\n        placeholder=\"ФИО\" \r\n        required \r\n        minLength=\"2\" \r\n        maxLength=\"20\"\r\n        id=\"full-name\"\r\n        value={name}\r\n        onChange={handleChangeName}/>\r\n      <span id=\"full-name-error\" className=\"popup__error\"></span>\r\n      <input \r\n        type=\"text\" \r\n        className=\"popup__input popup__input_occupation\" \r\n        name=\"occupation\" \r\n        placeholder=\"Род деятельности\" \r\n        required \r\n        minLength=\"2\" \r\n        maxLength=\"200\"\r\n        id=\"occupation\"\r\n        value={description}\r\n        onChange={handleChangeAbout}/>\r\n      <span id=\"occupation-error\" className=\"popup__error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props){\r\n\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    \r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value\r\n    });\r\n    \r\n    setTimeout(() => {\r\n      avatarRef.current.value = '';\r\n    }, 700);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      title=\"Обновить аватар\" \r\n      buttonName=\"Сохранить\" \r\n      name=\"avatar\" \r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      isLoading={props.isLoading}\r\n      onSubmit={handleSubmit}\r\n      loadingButtonTitle = 'Сохранение...'\r\n      >\r\n      <input\r\n        ref={avatarRef}\r\n        type=\"url\" \r\n        className=\"popup__input popup__input_avatar-link\" \r\n        name=\"avatar\" \r\n        placeholder=\"Ссылка на картинку\" \r\n        required\r\n        id=\"avatar\"/>\r\n      <span id=\"avatar-error\" className=\"popup__error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    \r\n    props.onAddPlace({name, link});  \r\n\r\n    setTimeout(() => {\r\n      setName('');\r\n      setLink('');\r\n    }, 700)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      title=\"Новое место\" \r\n      buttonName=\"Создать\" \r\n      name=\"card\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      isLoading={props.isLoading}\r\n      onSubmit= {handleSubmit}\r\n      loadingButtonTitle = 'Сохранение...'>\r\n      <input \r\n        value={name}\r\n        onChange={handleChangeName}\r\n        type=\"text\" \r\n        className=\"popup__input popup__input_image-title\" \r\n        name=\"image-title\" \r\n        placeholder=\"Название\" \r\n        required \r\n        minLength=\"2\" \r\n        maxLength=\"30\" \r\n        id=\"image-title\"/>\r\n      <span id=\"image-title-error\" className=\"popup__error\"></span>\r\n      \r\n      <input \r\n        value={link}\r\n        onChange={handleChangeLink}\r\n        type=\"url\" \r\n        className=\"popup__input popup__input_image-link\" \r\n        name=\"image-link\" \r\n        placeholder=\"Ссылка на картинку\" \r\n        required\r\n        id=\"image-link\"/>\r\n      <span id=\"image-link-error\" className=\"popup__error\"></span>\r\n   \r\n   </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmPopup(props){\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onConfirm(props);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      title=\"Вы уверены?\" \r\n      buttonName=\"Да\" \r\n      name=\"confirm\" \r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      isLoading={props.isLoading}\r\n      onSubmit={handleSubmit}\r\n      loadingButtonTitle = 'Удаление...'\r\n      >\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;","class Api{\r\n  \r\n  constructor({url, headers}){\r\n    this._url = url;\r\n    this._headers = headers;\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: this._headers\r\n      })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  addCard({name, link}){\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body : JSON.stringify({\r\n        name: name,\r\n        link : link \r\n      })\r\n    })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  getUserInfo(){\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers\r\n      })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  setUserInfo({name, about}){\r\n    return fetch(`${this._url}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body : JSON.stringify({name, about})\r\n      })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  setUserAvatar({avatar}) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body : JSON.stringify({avatar})\r\n    })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n  \r\n  deleteCard({cardId}) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  changeLikeCardStatus({cardId, isLiked}){\r\n\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      method: isLiked ? 'PUT' : 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(result => this._getResponseData({result}));\r\n  }\r\n\r\n  _getResponseData({result}){\r\n    return result.ok ? result.json() : Promise.reject(new Error(`Ошибка ${result.status}`));\r\n  }\r\n}\r\n\r\n\r\nconst api = new Api({\r\n  url : 'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  headers :{\r\n    authorization : 'a2645d68-6dae-4ace-a29b-319c06bb5839',\r\n    'Content-Type' : 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;\r\n","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmPopup from './ConfirmPopup';\r\nimport api from \"../utils/api.js\";\r\nimport useEventListener from '@use-it/event-listener';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction App() { \r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isImagePopupOpen, setImagePopup] = React.useState(false);\r\n  const [isConfirmPopupOpen, setConfirmPopup] = React.useState(false);\r\n  const [isLoading, setLoading] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  const [currentUser, setCurrentUser] = React.useState(CurrentUserContext);\r\n\r\n  React.useEffect( () => {\r\n    Promise.resolve(api.getUserInfo())\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      });\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true)\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true)\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true)\r\n  }\r\n\r\n  function handleConfirmClick() {\r\n    setConfirmPopup(true)\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setImagePopup(true);\r\n  }\r\n\r\n  function handleCardConfirmDelete(card){\r\n    setSelectedCard(card);\r\n    handleConfirmClick();\r\n  }\r\n\r\n  function handlePressEsc({ key }) {\r\n    if(key === 'Escape') closeAllPopups()\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setImagePopup(false);\r\n    setConfirmPopup(false);\r\n\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n      setSelectedCard({});\r\n    }, 700)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    api.getCards()\r\n      .then((data) => {\r\n        setCards(data);\r\n      })\r\n      .catch(error => console.log(error));\r\n  }, []);\r\n  \r\n  function handleAddPlaceSubmit({name, link}) {\r\n    setLoading(true);\r\n\r\n    api.addCard({name, link})\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups()\r\n    }).catch(error => console.log(error));\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    setLoading(true);\r\n\r\n    api.deleteCard({cardId : selectedCard._id})\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== selectedCard._id);\r\n        \r\n        setCards(newCards);\r\n        closeAllPopups();\r\n        setSelectedCard({});\r\n\r\n      }).catch(error => console.log(error));\r\n  }\r\n  \r\n  function handleCardLike(card) {    \r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    api.changeLikeCardStatus({cardId : card._id, isLiked: !isLiked})\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        \r\n        setCards(newCards);\r\n      }).catch(error => console.log(error));\r\n  }\r\n\r\n  function handleUpdateAvatar({avatar}) {\r\n    setLoading(true);\r\n\r\n    api.setUserAvatar({avatar})\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      }).catch(error => console.log(error));\r\n  }\r\n\r\n  function handleUpdateUser({name, about}){\r\n    setLoading(true);\r\n    \r\n    api.setUserInfo({name, about})\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      }).catch(error => console.log(error));\r\n  }\r\n\r\n  useEventListener('keydown', handlePressEsc);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"body\">\r\n        <div className=\"root\">\r\n          <Header/>\r\n          <Main \r\n            onEditProfile={handleEditProfileClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onConfirmClick={handleCardConfirmDelete}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onCardClick={handleCardClick}\r\n            onCardLike={handleCardLike}\r\n            cards={cards}\r\n          />\r\n          <Footer/>\r\n        </div>\r\n        \r\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} isLoading={isLoading}/>\r\n\r\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} isLoading={isLoading}/> \r\n        \r\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} isLoading={isLoading}/> \r\n\r\n        <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups}/>\r\n\r\n        <ConfirmPopup isOpen={isConfirmPopupOpen} onClose={closeAllPopups} onConfirm={handleCardDelete} isLoading={isLoading}/>\r\n\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}